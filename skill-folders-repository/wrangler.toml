name = "skill-folders-api"
# account_id is loaded from CLOUDFLARE_ACCOUNT_ID environment variable
# Set via GitHub Secrets or local .env file
compatibility_date = "2025-12-12"
compatibility_flags = ["nodejs_compat"]
main = "dist/index.js"
workers_dev = true

[vars]
API_VERSION = "1.0.0"
ENVIRONMENT = "development"
# Stripe Configuration (Development/Test)
STRIPE_PUBLISHABLE_KEY = "pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
STRIPE_SECRET_KEY = "sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
STRIPE_WEBHOOK_SECRET = "whsec_xxxxxxxxxxxxxxxxxxxxxxxx"
# Saudi Market Configuration
DEFAULT_LANGUAGE = "ar"
SUPPORTED_LANGUAGES = "ar,en"
SAUDI_MARKET_ENABLED = "true"
HEALTHCARE_VERIFICATION_ENABLED = "true"
MOH_COMPLIANCE_ENABLED = "true"

[env.production]
name = "skill-folders-api-prod"

[vars.ENV.production]
API_VERSION = "1.0.0"
ENVIRONMENT = "production"
# Stripe Configuration (Production)
# Note: These should be set via environment variables in production
# STRIPE_PUBLISHABLE_KEY = "{{ secrets.STRIPE_PUBLISHABLE_KEY }}"
# STRIPE_SECRET_KEY = "{{ secrets.STRIPE_SECRET_KEY }}"
# STRIPE_WEBHOOK_SECRET = "{{ secrets.STRIPE_WEBHOOK_SECRET }}"
# Saudi Market Configuration
DEFAULT_LANGUAGE = "ar"
SUPPORTED_LANGUAGES = "ar,en"
SAUDI_MARKET_ENABLED = "true"
HEALTHCARE_VERIFICATION_ENABLED = "true"
MOH_COMPLIANCE_ENABLED = "true"

[[r2_buckets]]
binding = "SKILLS_STORAGE"
bucket_name = "skills-storage"

[[kv_namespaces]]
binding = "SKILLS_KV"
id = "b60f07315ada43d6b4919407842d6662"

[build]
command = "npm run build"

[triggers]
crons = ["0 0 * * *"]  # Daily updates

[observability]
enabled = true

[[analytics_engine_datasets]]
binding = "ANALYTICS"
dataset = "skills_analytics"
